# Feature Specification: Game Numerical System Visual Editor

**Feature Branch**: `001-game-numeric-ui`
**Created**: 2026-01-25
**Status**: Draft
**Input**: User description: "实现一个游戏数值系统的json render 可视化修改器，技术思路是参考 app/debug/json_render/page.tsx 的代码逻辑，在 components/assistant-ui/game-numerical-setting/index.tsx 实现相同的逻辑，并且导出一个 makeAssistantToolUI 的组件，工具名为 displayGameNumericalSetting，支持将传入的游戏数值配置进行可视化展示和修改"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Visual Editing of Game Configuration (Priority: P1)

The user (via the Assistant) wants to visually view and edit the game's numerical configuration using a generated UI, rather than editing raw JSON.

**Why this priority**: Core functionality requested. Enables non-technical users (or AI) to easily modify complex game configs.

**Independent Test**: Can be tested by invoking the tool with a sample game config and verifying the UI renders and updates the data.

**Acceptance Scenarios**:

1. **Given** a game configuration object passed to the tool, **When** the tool is rendered, **Then** it should display a prompt input and an area for the generated UI.
2. **Given** the tool is active, **When** the user enters a prompt (e.g., "Show player stats editor"), **Then** the system should generate and render a form/dashboard corresponding to the data and prompt using the JSON rendering engine.
3. **Given** the rendered UI, **When** the user modifies a value (e.g., HP from 100 to 200), **Then** the underlying data object should be updated.
4. **Given** modified data, **When** the user confirms the change, **Then** the update should be reflected in the tool's state.

---

### Edge Cases

- **Empty Configuration**: If `initialData` is empty, the tool should handle it gracefully (e.g., allow starting from scratch or show a message).
- **Generation Failure**: If the UI generation service fails, the tool should display an error message and allow retry.
- **Invalid Prompt**: If the user provides a nonsensical prompt, the system should still attempt to render something or provide feedback.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: The system MUST implement a visual editor component that replicates the dashboard logic found in the debug interface (referencing `app/debug/json_render/page.tsx`).
- **FR-002**: The component MUST utilize the internal JSON rendering engine and state management providers to handle data visualization and validation.
- **FR-003**: The component MUST communicate with the backend UI generation service to create UI schemas based on data and user prompts.
- **FR-004**: The component MUST render the generated UI tree dynamically.
- **FR-005**: The component MUST provide a standard Assistant Tool interface (via `makeAssistantToolUI` export) for integration with the Assistant system.
- **FR-006**: The tool MUST be identified as `displayGameNumericalSetting`.
- **FR-007**: The UI MUST accept the game configuration data as input.
- **FR-008**: The UI MUST allow the user to input a prompt to guide the UI generation (e.g., "Create a dashboard for weapon balancing").
- **FR-009**: The UI MUST support real-time data updates and synchronization.

### Key Entities

- **GameConfiguration**: The data object containing game numerical values (Global, Player, Weapons, Enemies, etc.).
- **UI Tree**: The schema generated by the backend to describe the editor UI.
- **Prompt**: The text instruction provided by the user to guide the UI generation.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: The tool successfully renders a generated form for a provided complex data object (depth > 2, keys > 10) within 5 seconds of prompt submission.
- **SC-002**: Data modifications in the UI are reflected in the tool's state immediately (synchronously).
- **SC-003**: The tool is successfully registered and callable within the Assistant's runtime environment using the specified tool name.
